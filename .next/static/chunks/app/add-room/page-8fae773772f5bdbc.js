(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{889:function(e,t,l){Promise.resolve().then(l.bind(l,5973))},5973:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return d}});var n=l(7437),a=l(4033),s=l(2265),r=l(2173),c=l(5392),i=l(1396),u=l.n(i),o=l(8712);function d(){let e=(0,a.useRouter)(),[t,l]=(0,s.useState)({title:"",description:"",rent:0,imageUrl:"",addr1:"",addr2:"",author:""});console.log(t);let i=async()=>{try{let e=await r.Z.get("/api/get-current-user"),t=e.data.userID.toString();return t}catch(e){return console.log(e),""}};async function d(l){l.preventDefault();try{let l=await r.Z.post("/api/add-room",t);console.log(l),e.push("/home")}catch(e){console.log(e)}}return(0,s.useEffect)(()=>{i().then(e=>{l(t=>({...t,author:e}))}).catch(e=>{console.log(e)})},[]),(0,n.jsx)("div",{className:"w-screen min-h-screen flex justify-center items-center",children:(0,n.jsxs)("form",{className:"w-80 bg-slate-300 shadow-xl rounded-lg flex flex-col items-center p-5 gap-2",children:[(0,n.jsx)("h1",{className:"text-gray-800 text-4xl mb-3",children:"List your room"}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,n.jsx)("label",{className:"text-xs text-gray-600",children:"Title"}),(0,n.jsx)("input",{className:"rounded input input-accent",name:"title",type:"text",value:t.title,onChange:e=>{(0,c.Z)(e,l)},required:!0})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,n.jsx)("label",{className:"text-xs text-gray-600",children:"Description"}),(0,n.jsx)("input",{className:"rounded input input-accent",name:"description",type:"text",value:t.description,onChange:e=>{(0,c.Z)(e,l)},required:!0})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,n.jsx)("label",{className:"text-xs text-gray-600",children:"Rent"}),(0,n.jsx)("input",{className:"rounded input input-accent",name:"rent",type:"number",value:t.rent,onChange:e=>{(0,c.Z)(e,l)},required:!0})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,n.jsx)("label",{className:"text-xs text-gray-600",children:"Address Line 1"}),(0,n.jsx)("input",{className:"rounded input input-accent",name:"addr1",type:"text",value:t.addr1,onChange:e=>{(0,c.Z)(e,l)},required:!0})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,n.jsx)("label",{className:"text-xs text-gray-600",children:"Address Line 2"}),(0,n.jsx)("input",{className:"rounded input input-accent",name:"addr2",type:"text",value:t.addr2,onChange:e=>{(0,c.Z)(e,l)},required:!0})]}),(0,n.jsx)(o.ZF,{uploadPreset:"cqaussj8",onSuccess:e=>{l(t=>({...t,imageUrl:e.info.secure_url}))},children:e=>{let{open:t}=e;return(0,n.jsx)("button",{className:"bg-yellow-600 text-white px-5 py-2 w-full rounded",onClick:e=>{e.preventDefault(),t()},children:"Upload an Image"})}}),""===t.imageUrl?(0,n.jsx)("p",{className:"text-red-600 text-xs",children:"*You must upload a cover image*"}):null,(0,n.jsx)("button",{disabled:""===t.author,className:"".concat(""===t.author?"bg-green-300 cursor-not-allowed":"bg-green-500"," w-full text-white rounded px-5 py-2"),onClick:d,children:"Add"}),(0,n.jsx)(u(),{className:"text-sm text-gray-500 hover:link",href:"/home",children:"Go home"})]})})}},5392:function(e,t){"use strict";t.Z=(e,t)=>{t(t=>{let{name:l,value:n,type:a,files:s}=e.target;return"file"===a?{...t,[l]:s[0]}:{...t,[l]:n}})}}},function(e){e.O(0,[879,413,712,971,472,744],function(){return e(e.s=889)}),_N_E=e.O()}]);